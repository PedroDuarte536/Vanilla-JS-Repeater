const Repeater=function(e){let t,n,r=null,l=(e,t,n)=>e(),u=e=>l((()=>h(e)),o(e),e),i=e=>e(),c=(e=null)=>i((()=>f(e))),o=function(e=null){var n=null==e?":last-child":":nth-child("+(e+1)+")";return t.querySelector("[repeater-line]"+n)},a=function(e,t=null){let n=o(t);Object.entries(e).forEach((e=>n.querySelectorAll(`[repeater-input="${e[0]}"]`).forEach((t=>t.value=e[1]))))},d=function(){return t.querySelectorAll("[repeater-line]").length},p=function(e=0){let n=t.children;for(let r=e;r<n.length;r++)n[r].querySelectorAll("[repeater-input]").forEach((e=>e.setAttribute("name",`${t.id}[${n.length-1}][${e.getAttribute("repeater-input")}]`)))},f=function(e=null){let r=n.cloneNode(!0);t.appendChild(r);let l=t.children.length-1;return r.querySelectorAll("[repeater-remove]").forEach((function(e){e.addEventListener("click",(function(){u(Array.prototype.indexOf.call(t.children,r))}))})),null!=e&&a(e),p(l),t.dispatchEvent(new CustomEvent("onLineAppend",{detail:{index:l,line:r}})),r},h=function(e=null){let n=o(e);return null!=n&&(n.remove(),p(null!=e?e:d()-1),t.dispatchEvent(new CustomEvent("onLineRemove",{detail:{index:e}}))),null!=n},v=function(e){return l=e,r},A=function(e){return i=e,r};return function(){if(t=document.getElementById(e),null==t)return null;return n=function(){let e=t.children;if(0==e.length)return null;var n=e[0].cloneNode(!0);return n.setAttribute("repeater-line",""),n.querySelectorAll("[name]").forEach((function(e){var t=e.getAttribute("name");e.setAttribute("repeater-input",t)})),n}(),t.innerHTML="",[...document.querySelectorAll('[repeater-add=""]'),...document.querySelectorAll(`[repeater-add="${e}"]`)].forEach((e=>e.addEventListener("click",(()=>c()),!1))),r={addLine:c,removeLine:u,setRemoveLineWrapper:v,setAddLineWrapper:A,getLength:d,fillLine:a},r}()};
